/*! jQuery.tabify (https://github.com/Takazudo/jQuery.tabify)
 * lastupdate: 2013-05-13
 * version: 1.1.0
 * author: 'Takazudo' Takeshi Takatsudo <takazudo@gmail.com>
 * License: MIT */
(function(){(function(t){var e;return e={},e.support={},e.support.transition=function(){var e;return(null!=(e=t.support)?e.transition:void 0)&&null!=t.fn.transition?!0:!1}(),e.taller=function(t,e){var n,i;return n=t.outerHeight(),i=e.outerHeight(),n>i?t:e},e.Tab=function(){function n(n,i){this.$el=n,null==i&&(i={}),this.options=t.extend({},e.Tab.defaults,i),this._transitionEnabled=e.support.transition&&this.options.useTransition,this._eventify()}return n.defaults={selector_tab:".tab",selector_contentwrapper:".tabcontentwrapper",selector_content:".tabcontentdiv",tab_activeClass:null,content_activeClass:null,attr_target:"data-tabify-target",attr_id:"data-tabify-id",changeHash:!1,useFade:!1,useTransition:!1,fadeDuration:400},n.prototype._eventify=function(){var e=this;return this.$el.delegate(this.options.selector_tab,"click",function(n){return e.options.changeHash!==!0&&n.preventDefault(),e.switchFromOpener(t(n.currentTarget))}),this},n.prototype.switchFromOpener=function(t){var n,i,s,o,r,a=this;return n=this.$lastContentEl||function(){return a.$lastContentEl=a.$el.find("."+a.options.content_activeClass)}(),i=this.getRelatedContentEl(t),n[0]===i[0]?this:(null!=(r=this._lastFadeDefer)&&r.reject(),this.disableContentEl(n),this.options.useFade&&(this.makeContentElsToAbsolute(),s=e.taller(n,i),this.fixWrapperTo(s)),o={lastTabEl:this.getLastTab(),clickedTabEl:t,lastContentEl:n,contentEl:i},this.$el.trigger("tabify.switch",o),this.$el.trigger("tabify.beforeswitchanimation",o),this.$lastContentEl=i,this._lastFadeDefer=this.activateContentEl(i),this._lastFadeDefer.done(function(){return a.options.useFade&&s[0]!==i[0]&&a.fixWrapperTo(i),a.$el.trigger("tabify.afterswitchanimation",o)}),this.disableActiveTab(),this.activateTab(t),this)},n.prototype.getWrapperEl=function(){var t=this;return this.$wrapper||function(){return t.$wrapper=t.$el.find(t.options.selector_contentwrapper),t.$wrapper}()},n.prototype.fixWrapperTo=function(t){return this.getWrapperEl().height(t.outerHeight()),this},n.prototype.makeContentElsToAbsolute=function(){var t;return t=this.$el.find(this.options.selector_content),t.css({position:"absolute",left:0,top:0}),this},n.prototype.activateContentEl=function(e){var n,i=this;return n=t.Deferred(function(t){var n,s,o;return s=i.options.content_activeClass,n=function(){return e.addClass(s),t.resolve()},i.options.useFade?(o=i.options.fadeDuration,i._transitionEnabled?e.show().css("opacity",0).transition({opacity:1},o,n):e.fadeTo(o,1,n)):n()})},n.prototype.disableContentEl=function(t){var e,n=this;return e=function(){return t.removeClass(n.options.content_activeClass)},this.options.useFade?(this._transitionEnabled?t.stop().css("opacity",0).hide():t.stop().fadeTo(0,0).hide(),e()):e(),this},n.prototype.getLastTab=function(){var e=this;return this.$lastTab||function(){var n,i;return i=e.options.tab_activeClass,n=e.$el.find(e.options.selector_tab),e.$lastTab=n.filter(function(e,n){return t(n).hasClass(i)}),e.$lastTab}()},n.prototype.activateTab=function(t){return t.addClass(this.options.tab_activeClass),this.$lastTab=t,this},n.prototype.disableActiveTab=function(){var t;return t=this.options.tab_activeClass,this.getLastTab().removeClass(t),this},n.prototype.getRelatedContentEl=function(e){var n,i,s,o,r=this;return n=this.$el.find(this.options.selector_content),o=e.attr(this.options.attr_target),o&&(i=n.filter(function(e,n){return t(n).attr(r.options.attr_id)===o?!0:!1}),1===i.length)?i:(s=e.attr("href"),this.$el.find(s))},n.prototype.switchById=function(e){var n;return this.options.changeHash&&(location.href="#"+e),n=this.$el.find(this.options.selector_tab).filter(function(n,i){return t(i).attr("href")==="#"+e}),n.length&&this.switchFromOpener(n),this},n.prototype.switchByTabId=function(e){var n,i=this;return n=this.$el.find(this.options.selector_tab).filter(function(n,s){return t(s).attr(i.options.attr_target)===e}),n.length&&this.switchFromOpener(n),this},n}(),t.fn.tabify=function(n){return this.each(function(){var i,s;i=t(this),s=new e.Tab(i,n),i.data("tabify",s)})},t.Tabify=e})(jQuery,window,document)}).call(this);