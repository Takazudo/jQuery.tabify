/*! jQuery.tabify (https://github.com/Takazudo/jQuery.tabify)
 * lastupdate: 2014-02-19
 * version: 1.2.1
 * author: 'Takazudo' Takeshi Takatsudo <takazudo@gmail.com>
 * License: MIT */
(function(){var t=function(t,n){return function(){return t.apply(n,arguments)}};(function(n,e){var i,o;return i=n(e),o={},o.support={},o.support.transition=function(){var t;return(null!=(t=n.support)?t.transition:void 0)&&null!=n.fn.transition?!0:!1}(),o.normalizeEventData=function(t){return n.each(t,function(n,e){return null!=(null!=e?e.length:void 0)&&0===e.length?t[n]=null:void 0}),t},o.Router=function(){function n(){this.onHashchange=t(this.onHashchange,this),this._eventify()}return n.prototype._eventify=function(){return i.on("hashchange",this.onHashchange),this},n.prototype.onHashchange=function(){var t;switch(t=location.hash){case"#":case"":console.log("ah!");break;default:console.log("foo!")}return this},n}(),o.Tab=function(){function t(t,e){this.$el=t,null==e&&(e={}),this.options=n.extend({},o.Tab.defaults,e),this._transitionEnabled=o.support.transition&&this.options.useTransition,this.options.useHashchange&&(this._router=new o.Router),this._eventify()}return t.defaults={selector_tab:".tab",selector_contentwrapper:".tabcontentwrapper",selector_content:".tabcontentdiv",tab_activeClass:null,content_activeClass:null,attr_target:"data-tabify-target",attr_id:"data-tabify-id",useFade:!1,useTransition:!1,fadeDuration:400,useHashchange:!1,allow_noactive:!1},t.prototype._eventify=function(){var t=this;return this.options.useHashchange?console.log("hoge"):this.$el.delegate(this.options.selector_tab,"click",function(e){return e.preventDefault(),t.switchFromOpener(n(e.currentTarget))}),this},t.prototype.switchFromOpener=function(t){var e,i,s,r,a,l,h=this;if(e=this.$lastContentEl||function(){return h.$lastContentEl=h.$el.find("."+h.options.content_activeClass)}(),i=this.getRelatedContentEl(t),a=!1,e[0]===i[0]){if(!this.options.allow_noactive)return this;a=!0}return s=a?n.Deferred():null,null!=(l=this._lastFadeDefer)&&l.reject(),a?this.disableContentEl(e,!0,function(){return s.resolve()}):this.disableContentEl(e,!1,null),this.options.useFade&&(this.makeContentElsToAbsolute(),a?(this.fixWrapperTo(e),s.done(function(){return h.hideWrapper()})):(this.showWrapper(),this.fixWrapperTo(i))),r={},a?(r.lastTabEl=t,r.tabEl=null,r.lastContentEl=e,r.contentEl=null):(r.lastTabEl=this.getLastTab(),r.tabEl=t,r.lastContentEl=e,r.contentEl=i),r=o.normalizeEventData(r),this.$lastContentEl=a?null:i,this.$el.trigger("tabify.switch",r),a||this.$el.trigger("tabify.beforeswitchanimation",r),a||(this._lastFadeDefer=this.activateContentEl(i),this._lastFadeDefer.done(function(){return h.$el.trigger("tabify.afterswitchanimation",r)})),this.disableActiveTab(),a||this.activateTab(t),this},t.prototype.getWrapperEl=function(){var t=this;return this.$wrapper||function(){return t.$wrapper=t.$el.find(t.options.selector_contentwrapper),t.$wrapper}()},t.prototype.fixWrapperTo=function(t){return this.getWrapperEl().height(t.outerHeight()),this},t.prototype.hideWrapper=function(){return this.getWrapperEl().hide(),this},t.prototype.showWrapper=function(){return this.getWrapperEl().show(),this},t.prototype.adjustWrapperHeight=function(){return this.$lastContentEl?(this.fixWrapperTo(this.$lastContentEl),this):this},t.prototype.makeContentElsToAbsolute=function(){var t;return t=this.$el.find(this.options.selector_content),t.css({position:"absolute",left:0,top:0}),this},t.prototype.activateContentEl=function(t){var e,i=this;return e=n.Deferred(function(n){var e,o,s;return o=i.options.content_activeClass,e=function(){return t.addClass(o),n.resolve()},i.options.useFade?(s=i.options.fadeDuration,i._transitionEnabled?t.show().css("opacity",0).transition({opacity:1},s,e):t.fadeTo(s,1,e)):e()})},t.prototype.disableContentEl=function(t,n,e){var i,o,s=this;return o=function(){return t.removeClass(s.options.content_activeClass),"function"==typeof e?e():void 0},this.options.useFade?n?(i=this.options.fadeDuration,this._transitionEnabled?t.stop().transition({opacity:0},i,o):t.fadeTo(i,0,o)):(this._transitionEnabled?t.stop().css("opacity",0).hide():t.stop().fadeTo(0,0).hide(),o()):o(),this},t.prototype.getLastTab=function(){var t=this;return this.$lastTab||function(){var e,i;return i=t.options.tab_activeClass,e=t.$el.find(t.options.selector_tab),t.$lastTab=e.filter(function(t,e){return n(e).hasClass(i)}),t.$lastTab}()},t.prototype.activateTab=function(t){return t.addClass(this.options.tab_activeClass),this.$lastTab=t,this},t.prototype.disableActiveTab=function(){var t;return t=this.options.tab_activeClass,this.getLastTab().removeClass(t),this},t.prototype.getRelatedContentEl=function(t){var e,i,o,s,r=this;return e=this.$el.find(this.options.selector_content),s=t.attr(this.options.attr_target),s&&(i=e.filter(function(t,e){return n(e).attr(r.options.attr_id)===s?!0:!1}),1===i.length)?i:(o=t.attr("href"),this.$el.find(o))},t.prototype.switchById=function(t){var e;return e=this.$el.find(this.options.selector_tab).filter(function(e,i){return n(i).attr("href")==="#"+t}),e.length&&this.switchFromOpener(e),this},t.prototype.switchByTabId=function(t){var e,i=this;return e=this.$el.find(this.options.selector_tab).filter(function(e,o){return n(o).attr(i.options.attr_target)===t}),e.length&&this.switchFromOpener(e),this},t}(),n.fn.tabify=function(t){return this.each(function(){var e,i;e=n(this),i=new o.Tab(e,t),e.data("tabify",i)})},n.Tabify=o})(jQuery,window,document)}).call(this);