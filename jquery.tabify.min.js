/*! jQuery.tabify (https://github.com/Takazudo/jQuery.tabify)
 * lastupdate: 2014-02-19
 * version: 1.2.1
 * author: 'Takazudo' Takeshi Takatsudo <takazudo@gmail.com>
 * License: MIT */
(function(){var t=function(t,e){return function(){return t.apply(e,arguments)}},e={}.hasOwnProperty,n=function(t,n){function r(){this.constructor=t}for(var i in n)e.call(n,i)&&(t[i]=n[i]);return r.prototype=n.prototype,t.prototype=new r,t.__super__=n.prototype,t};(function(e,r){var i,o,s;return i=e(r),o=r.EveEve,s={},s.support={},s.support.transition=function(){var t;return(null!=(t=e.support)?t.transition:void 0)&&null!=e.fn.transition?!0:!1}(),s.normalizeEventData=function(t){return e.each(t,function(e,n){return null!=(null!=n?n.length:void 0)&&0===n.length?t[e]=null:void 0}),t},o&&(s.Router=function(e){function r(){this.onHashchange=t(this.onHashchange,this),this._eventify()}return n(r,e),r.create=function(){return s.router||(s.router=new s.Router),s.router},r.prototype._eventify=function(){return i.on("hashchange",this.onHashchange),this},r.prototype.onHashchange=function(){return this.trigger("hashchange",this.getCurrentHash()),this},r.prototype.getCurrentHash=function(){var t;return t=location.hash,""===t&&(t="#"),t=t.replace(/^#/,"")},r}(o)),s.Tab=function(){function t(t,n){this.$el=t,null==n&&(n={}),this.options=e.extend({},s.Tab.defaults,n),this._transitionEnabled=s.support.transition&&this.options.useTransition,this._firstTabHrefVal=this.getFirstTabHrefVal(),this.options.useHashchange&&(s.Router.create(),this.switchByHash(s.router.getCurrentHash())),this._eventify()}return o&&e.extend(t.prototype,o.prototype),t.defaults={selector_tab:".tab",selector_contentwrapper:".tabcontentwrapper",selector_content:".tabcontentdiv",tab_activeClass:null,content_activeClass:null,attr_target:"data-tabify-target",attr_id:"data-tabify-id",useFade:!1,useTransition:!1,fadeDuration:400,useHashchange:!1,allow_noactive:!1},t.prototype._eventify=function(){var t=this;return this.options.useHashchange?s.router.on("hashchange",function(e){return t.switchByHash(e)}):this.$el.delegate(this.options.selector_tab,"click",function(n){return n.preventDefault(),t.switchFromOpener(e(n.currentTarget))}),this},t.prototype._trigger=function(t,e){return this.$el.trigger(t,e),o?this.trigger(t,e):this},t.prototype.switchFromOpener=function(t){var n,r,i,o,a,h,l=this;if(n=this.$lastContentEl||function(){return l.$lastContentEl=l.$el.find("."+l.options.content_activeClass)}(),r=this.getRelatedContentEl(t),a=!1,n[0]===r[0]){if(!this.options.allow_noactive)return this;a=!0}return i=a?e.Deferred():null,null!=(h=this._lastFadeDefer)&&h.reject(),a?this.disableContentEl(n,!0,function(){return i.resolve()}):this.disableContentEl(n,!1,null),this.options.useFade&&(this.makeContentElsToAbsolute(),a?(this.fixWrapperTo(n),i.done(function(){return l.hideWrapper()})):(this.showWrapper(),this.fixWrapperTo(r))),o={},a?(o.lastTabEl=t,o.tabEl=null,o.lastContentEl=n,o.contentEl=null):(o.lastTabEl=this.getLastTab(),o.tabEl=t,o.lastContentEl=n,o.contentEl=r),o=s.normalizeEventData(o),this.$lastContentEl=a?null:r,this._trigger("tabify.switch",o),a||this._trigger("tabify.beforeswitchanimation",o),a||(this._lastFadeDefer=this.activateContentEl(r),this._lastFadeDefer.done(function(){return l._trigger("tabify.afterswitchanimation",o)})),this.disableActiveTab(),a||this.activateTab(t),this},t.prototype.getWrapperEl=function(){var t=this;return this.$wrapper||function(){return t.$wrapper=t.$el.find(t.options.selector_contentwrapper),t.$wrapper}()},t.prototype.fixWrapperTo=function(t){return this.getWrapperEl().height(t.outerHeight()),this},t.prototype.hideWrapper=function(){return this.getWrapperEl().hide(),this},t.prototype.showWrapper=function(){return this.getWrapperEl().show(),this},t.prototype.adjustWrapperHeight=function(){return this.$lastContentEl?(this.fixWrapperTo(this.$lastContentEl),this):this},t.prototype.makeContentElsToAbsolute=function(){var t;return t=this.$el.find(this.options.selector_content),t.css({position:"absolute",left:0,top:0}),this},t.prototype.activateContentEl=function(t){var n,r=this;return n=e.Deferred(function(e){var n,i,o;return i=r.options.content_activeClass,n=function(){return t.addClass(i),e.resolve()},r.options.useFade?(o=r.options.fadeDuration,r._transitionEnabled?t.show().css("opacity",0).transition({opacity:1},o,n):t.fadeTo(o,1,n)):n()})},t.prototype.disableContentEl=function(t,e,n){var r,i,o=this;return i=function(){return t.removeClass(o.options.content_activeClass),"function"==typeof n?n():void 0},this.options.useFade?e?(r=this.options.fadeDuration,this._transitionEnabled?t.stop().transition({opacity:0},r,i):t.fadeTo(r,0,i)):(this._transitionEnabled?t.stop().css("opacity",0).hide():t.stop().fadeTo(0,0).hide(),i()):i(),this},t.prototype.getFirstTabHrefVal=function(){var t,e;if(t=this.$el.find(this.options.selector_tab).eq(0),e=t.attr("href"),null==e&&(e=t.attr(this.options.attr_target)),null!=e)return e=e.replace(/^#/,"");throw Error("getFirstTabHrefVal had some troubles")},t.prototype.getLastTab=function(){var t=this;return this.$lastTab||function(){var n,r;return r=t.options.tab_activeClass,n=t.$el.find(t.options.selector_tab),t.$lastTab=n.filter(function(t,n){return e(n).hasClass(r)}),t.$lastTab}()},t.prototype.activateTab=function(t){return t.addClass(this.options.tab_activeClass),this.$lastTab=t,this},t.prototype.disableActiveTab=function(){var t;return t=this.options.tab_activeClass,this.getLastTab().removeClass(t),this},t.prototype.getRelatedContentEl=function(t){var n,r,i,o,s=this;if(n=this.$el.find(this.options.selector_content),i=t.attr("href"),null!=i&&(i=i.replace(/^#/,"")),o=t.attr(this.options.attr_target),r=n.filter(function(t,n){var r,a;return r=e(n),a=r.attr(s.options.attr_id),null==a&&(a=r.attr("id")),null==a||a!==i&&a!==o?!1:!0}),1!==r.length)throw Error("getRelatedContentEl had some troubles.");return r},t.prototype.switchByHash=function(t){return""===t&&(t=this._firstTabHrefVal),this.switchById(t)},t.prototype.switchById=function(t){var n;return n=this.$el.find(this.options.selector_tab).filter(function(n,r){return e(r).attr("href")==="#"+t}),n.length&&this.switchFromOpener(n),this},t.prototype.switchByTabId=function(t){var n,r=this;return n=this.$el.find(this.options.selector_tab).filter(function(n,i){return e(i).attr(r.options.attr_target)===t}),n.length&&this.switchFromOpener(n),this},t}(),e.fn.tabify=function(t){return this.each(function(){var n,r;n=e(this),r=new s.Tab(n,t),n.data("tabify",r)})},e.Tabify=s})(jQuery,window,document)}).call(this);